<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cricket Team Selector</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            margin: 0;
            padding: 0;
        }
        .error {
            color: red;
            font-weight: bold;
            text-align: center;
        }
        header {
            background-color: #6a1b9a;
            padding: 10px;
            text-align: center;
            color: white;
        }
        nav {
            margin-top: 10px;
        }
        nav a {
            color: white;
            font-weight: bold;
            text-decoration: none;
            margin: 0 15px;
        }
        .form-section {
            padding: 20px;
            margin: 10px 0;
        }
        #team-name-section {
            background-color: #ffcccc;
        }
        #wk-section {
            background-color: #ccffcc;
        }
        #batsman-section {
            background-color: #ccccff;
        }
        #bowler-section {
            background-color: #ffccff;
        }
        #captain-section {
            background-color: #ffffcc;
        }
        #all-rounder-section {
            background-color: #007bff;
        }
        .form-group {
            margin-bottom: 1rem;
        }
        label {
            display: block;
            margin-bottom: 0.5rem;
        }
        input[type="text"], select {
            width: 100%;
            padding: 0.5rem;
            margin-bottom: 0.5rem;
        }
        button[type="submit"] {
            width: 100%;
            padding: 0.75rem;
        }
        .header-image {
            width: 100%;
            height: auto;
            display: block;
        }
    </style>
</head>
<body>
    <header>
        <img src="https://images.icc-cricket.com/image/private/t_q-best/v1706276260/prd/assets/tournaments/t20worldcup/2024/t20-logo-horizontal-light.svg" alt="ICC T20 World Cup 2024 Logo">
        <h3 style="font-size:20px">APNA WORLD CUP TEAM SELECTION</h3>
        <nav>
            <a href="index.html">Team Selection</a>
            <a href="invspk.html">Ind vs Pak</a>
        </nav>
    </header>

    <div class="container">
        <h3 class="text-center my-4" style="font-size:18px"><strong>SUPER 8 TEAM SELECTION</strong></h3>
        <img src="https://i.ytimg.com/vi/pmM_y3SjG5E/maxresdefault.jpg" class="header-image">
        <form id="team-form" class="mb-4">
            <div id="team-name-section" class="form-section">
                <div class="form-group">
                    <label for="teamname"><strong>Your Team Name:</strong></label>
                    <input id="teamname" name="teamname" type="text" class="form-control" required>
                </div>
            </div>
            <div id="wk-section" class="form-section">
                <div class="form-group">
                    <label for="wk">Wicket Keeper:</label>
                    <input type="text" id="wk" name="wk" class="form-control autocomplete">
                </div>
            </div>
            <div id="batsman-section" class="form-section">
                <div class="form-group">
                    <label for="batsman1">Batsman 1:</label>
                    <input type="text" id="batsman1" name="batsman1" class="form-control autocomplete">
                </div>
                <div class="form-group">
                    <label for="batsman2">Batsman 2:</label>
                    <input type="text" id="batsman2" name="batsman2" class="form-control autocomplete">
                </div>
                <div class="form-group">
                    <label for="batsman3">Batsman 3:</label>
                    <input type="text" id="batsman3" name="batsman3" class="form-control autocomplete">
                </div>
                <div class="form-group">
                    <label for="batsman4">Batsman 4:</label>
                    <input type="text" id="batsman4" name="batsman4" class="form-control autocomplete">
                </div>
            </div>
            <div class="form-section" id="all-rounder-section">
                <div>
                    <label for="allrounder1">All-Rounder 1:</label>
                    <input type="text" id="allrounder1" name="allrounder1" class="form-control autocomplete">
                </div>
                <div>
                    <label for="allrounder2">All-Rounder 2:</label>
                    <input type="text" id="allrounder2" name="allrounder2" class="form-control autocomplete">
                </div>
            </div>
            <div id="bowler-section" class="form-section">
                <div class="form-group">
                    <label for="bowler1">Bowler 1:</label>
                    <input type="text" id="bowler1" name="bowler1" class="form-control autocomplete">
                </div>
                <div class="form-group">
                    <label for="bowler2">Bowler 2:</label>
                    <input type="text" id="bowler2" name="bowler2" class="form-control autocomplete">
                </div>
                <div class="form-group">
                    <label for="bowler3">Bowler 3:</label>
                    <input type="text" id="bowler3" name="bowler3" class="form-control autocomplete">
                </div>
                <div class="form-group">
                    <label for="bowler4">Bowler 4:</label>
                    <input type="text" id="bowler4" name="bowler4" class="form-control autocomplete">
                </div>
            </div>
            <div id="captain-section" class="form-section">
                <div class="form-group">
                    <label for="captain">Captain:</label>
                    <input type="text" id="captain" name="captain" class="form-control autocomplete">
                </div>
                <div class="form-group">
                    <label for="vice-captain">Vice-Captain:</label>
                    <input type="text" id="vice-captain" name="vice-captain" class="form-control autocomplete">
                </div>
            </div>
            <div id="error-message" class="error"></div>
            <button type="submit" class="btn btn-primary">Submit</button>
        </form>
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script>
    document.addEventListener("DOMContentLoaded", () => {
        const form = document.getElementById("team-form");

        const players = {
            batsman: [
                "Ibrahim Zadran - Afghanistan", "Najibullah Zadran - Afghanistan", "Travis Head - Australia",
    "David Warner - Australia", "Harry Brook - England", "Jonathan Bairstow - England",
    "Will Jacks - England", "Reeza Hendricks - South Africa", "David Miller - South Africa",
    "Ryan Rickelton - South Africa", "Tristan Stubbs - South Africa", "Yashasvi Jaiswal - India",
    "Virat Kohli - India", "Suryakumar Yadav - India", "Rohit Sharma - India", "Rahmanullah Gurbaz - Afghanistan", "Shubman Gill - India", "Rinku Singh - India",
    "Corey Anderson - United States", "Steven Taylor - United States", "Monank Patel - United States",
    "Shayan Jahangir - United States", "Shimron Hetmyer - West Indies", "Brandon King - West Indies",
    "Rovman Powell - West Indies", "Johnson Charles - West Indies"
            ],
            allRounder: [
                "Azmatullah Omarzai - Afghanistan", "Gulbadin Naib - Afghanistan", "Mohammad Nabi - Afghanistan",
    "Mitchell Marsh - Australia", "Marcus Stoinis - Australia", "Cameron Green - Australia",
    "Shakib Al Hasan - Bangladesh", "Mahmud Ullah Riyad - Bangladesh", "Moeen Ali - England",
    "Sam Curran - England", "Liam Livingstone - England", "Hardik Pandya - India",
    "Shivam Dube - India", "Ravindra Jadeja - India", "Axar Patel - India",
    "Marco Jansen - South Africa", "Andre Russell - West Indies", "Jason Holder - West Indies",
    "Roston Chase - West Indies", "Romario Shepherd - West Indies", "Sherfane Rutherford - West Indies"
            ],
            wicketKeeper: [
                "Rahmanullah Gurbaz - Afghanistan", "Mohammad Ishaq - Afghanistan", "Josh Inglis - Australia",
    "Matthew Wade - Australia", "Litton Das - Bangladesh", "Jaker Ali Anik - Bangladesh",
    "Jos Buttler - England", "Quinton de Kock - South Africa", "Heinrich Klaasen - South Africa",
    "Milind Kumar - United States", "Nicholas Pooran - West Indies", "Shai Hope - West Indies", "Rishabh Pant - India", "Sanju Samson - India"
            ],
            bowler: [
                 "Rashid Khan - Afghanistan", "Mujeeb Ur Rahman - Afghanistan", "Noor Ahmad - Afghanistan",
    "Naveen-ul-Haq - Afghanistan", "Fazalhaq Farooqi - Afghanistan", "Fareed Ahmad Malik - Afghanistan",
    "Josh Hazlewood - Australia", "Pat Cummins - Australia", "Nathan Ellis - Australia",
    "Mitchell Starc - Australia", "Adam Zampa - Australia", "Taskin Ahmed - Bangladesh",
    "Tanvir Islam - Bangladesh", "Rishad Hossain - Bangladesh", "Mustafizur Rahman - Bangladesh",
    "Shoriful Islam - Bangladesh", "Tanzim Hasan Sakib - Bangladesh", "Jofra Archer - England",
    "Chris Jordan - England", "Mark Wood - England", "Reece Topley - England", "Adil Rashid - England",
    "Tom Hartley - England", "Arshdeep Singh - India", "Jasprit Bumrah - India", "Mohd. Siraj - India",
    "Kuldeep Yadav - India", "Yuzvendra Chahal - India", "Khaleel Ahmed - India", "Avesh Khan - India",
    "Ottniel Baartman - South Africa", "Gerald Coetzee - South Africa", "Bjorn Fortuin - South Africa",
    "Keshav Maharaj - South Africa", "Anrich Nortje - South Africa", "Kagiso Rabada - South Africa",
    "Tabraiz Shamsi - South Africa", "Ali Khan - United States", "Saurabh Nethralvakar - United States",
    "Jessy Singh - United States", "Nisarg Patel - United States", "Noshtush Kenjige - United States",
    "Shadley Van Schalkwyk - United States", "Akeal Hosein - West Indies", "Alzarri Joseph - West Indies",
    "Gudakesh Motie - West Indies", "Shamar Joseph - West Indies"
            ]
        };

        const positionMapping = {
            "#wk": players.wicketKeeper,
            "#batsman1": players.batsman,
            "#batsman2": players.batsman,
            "#batsman3": players.batsman,
            "#batsman4": players.batsman,
            "#allrounder1": players.allRounder,
            "#allrounder2": players.allRounder,
            "#bowler1": players.bowler,
            "#bowler2": players.bowler,
            "#bowler3": players.bowler,
            "#bowler4": players.bowler
        };

        Object.keys(positionMapping).forEach(id => {
            $(id).autocomplete({
                source: positionMapping[id],
                minLength: 2
            });
        });

        form.addEventListener("submit", (event) => {
            event.preventDefault();
           const data = new FormData(form);

            const selectedPlayers = [
                ...document.querySelectorAll(".autocomplete")
            ].map(field => field.value.trim());

            const uniquePlayers = new Set(selectedPlayers);

            const captain = document.querySelector("#captain").value.trim();
            const viceCaptain = document.querySelector("#vice-captain").value.trim();
          
           // Collect selected players (excluding captain and vice-captain)
    for (let [key, value] of data.entries()) {
        if (key.startsWith("batsman") || key.startsWith("bowler") || key.startsWith("allrounder") || key.startsWith("wk")) {
            if (selectedPlayers.includes(value)) {
                errorMessage = "Can't select same player twice. Please choose a unique player.";
                break;
            }
            selectedPlayers.push(value);
        }
    }


            if (!selectedPlayers.includes(captain) || !selectedPlayers.includes(viceCaptain)) {
                document.getElementById("error-message").innerText = "Captain and Vice-Captain must be selected from the chosen players.";
                return;
            }

            document.getElementById("error-message").innerText = "";
              fetch('https://script.google.com/macros/s/AKfycbz9zT_iVyIC8zXGVnwSvRAYAik6FVd0i9N6nF_PUNqssUVu8XTlPdw7Hm5VHSGJDiBNAg/exec', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded'
            },
            body: new URLSearchParams(data)
        })
        .then(response => response.text())
        .then(text => {
            if (text.includes("Success")) {
                document.getElementById('error-message').textContent = "Team Successfully Submitted.";
            } else {
                throw new Error(text);
            }
        }).catch(error => {
            document.getElementById('error-message').textContent = 'Error submitting form: ' + error.message;
            console.error('Error:', error);
        });
        });

        // Update captain and vice-captain autocomplete sources based on selected players
        const updateCaptainViceCaptainAutocomplete = () => {
            const selectedPlayers = [
                ...document.querySelectorAll(".autocomplete")
            ].map(field => field.value.trim());

            $("#captain, #vice-captain").autocomplete({
                source: selectedPlayers,
                minLength: 2
            });
        };

        // Add event listeners to update captain and vice-captain autocomplete sources when other fields change
        document.querySelectorAll(".autocomplete").forEach(field => {
            field.addEventListener("change", updateCaptainViceCaptainAutocomplete);
            field.addEventListener("keyup", updateCaptainViceCaptainAutocomplete);
        });
    });
    
</script>

</body>
</html>
